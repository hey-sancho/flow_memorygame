import lib/tropic/tropic_ui;

Card(
	face: TColor,
	opened: DynamicBehaviour<bool>,
	solved: DynamicBehaviour<bool>,
);

drawCard(color: TColor) -> Tropic {
	size = TFixed(150.0, 150.0);

	card = Card(color, make(false), make(false));
	toggleCard = \ -> reverseBehaviour(card.opened);

	TSelect(card.opened, \opened -> {
		faceColor = if (opened) card.face else TDarkGrey();
		TTextButton("", "", [faceColor, TForeground(size)], [TOnClicked(toggleCard)]);
	});
}

main() {
	header = TText("Memory game", [FontSize(20.0)]);

	cards = TCols([
		drawCard(TGreen()),
		drawCard(TRed()),
		drawCard(TGreen()),
		drawCard(TRed()),
	]);

	view = TLinesXCenter([
		header,
		cards,
	]) |> TCenterX;

	trender(view, []);
}
